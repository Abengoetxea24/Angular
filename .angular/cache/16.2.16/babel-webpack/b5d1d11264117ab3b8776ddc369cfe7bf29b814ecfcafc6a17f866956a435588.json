{"ast":null,"code":"export class FormRescatadosComponent {\n  constructor(servicesService, route, router) {\n    this.servicesService = servicesService;\n    this.route = route;\n    this.router = router;\n    this.nombre = '';\n    this.apellido = '';\n    this.edad = '';\n    this.sexo = '';\n    this.procedencia = '';\n    this.valoracion_medica = '';\n    this.medico_id = '';\n    this.rescate_id = '';\n    this.index = null; // Índice del rescatado a editar\n    this.id = null; // Agregar la propiedad id\n    this.rescatados = []; // Lista local de rescatados\n  }\n\n  ngOnInit() {\n    // Cargar rescatados desde el servicio\n    this.servicesService.cargarRescatados();\n    // Suscribirse al observable para actualizar la lista local\n    this.servicesService.rescatados$.subscribe(data => {\n      this.rescatados = data;\n      // Comprobar si tenemos un parámetro de id para la edición\n      this.route.params.subscribe(params => {\n        const id = +params['id']; // Convertir el id a un número\n        if (id) {\n          this.id = id; // Asignar el id recibido de la URL\n          this.index = this.rescatados.findIndex(rescatado => rescatado.id === id);\n          if (this.index !== -1) {\n            const rescatado = this.rescatados[this.index];\n            this.nombre = rescatado.nombre;\n            this.apellido = rescatado.apellido;\n            this.edad = rescatado.edad;\n            this.sexo = rescatado.sexo;\n            this.procedencia = rescatado.procedencia;\n            this.valoracion_medica = rescatado.valoracion_medica;\n            this.medico_id = rescatado.medico_id;\n            this.rescate_id = rescatado.rescate_id;\n          }\n        }\n      });\n    });\n  }\n  guardarRescatado() {\n    const rescatado = {\n      nombre: this.nombre,\n      apellido: this.apellido,\n      edad: this.edad,\n      sexo: this.sexo,\n      procedencia: this.procedencia,\n      valoracion_medica: this.valoracion_medica,\n      medico_id: this.medico_id,\n      rescate_id: this.rescate_id\n    };\n    if (this.index === null) {\n      this.servicesService.agregarRescatado(rescatado);\n    } else {\n      this.servicesService.actualizarRescatado(this.index, rescatado);\n    }\n    // Navegar de vuelta a la tabla\n    this.router.navigate(['/Admin']);\n  }\n}","map":{"version":3,"names":["FormRescatadosComponent","constructor","servicesService","route","router","nombre","apellido","edad","sexo","procedencia","valoracion_medica","medico_id","rescate_id","index","id","rescatados","ngOnInit","cargarRescatados","rescatados$","subscribe","data","params","findIndex","rescatado","guardarRescatado","agregarRescatado","actualizarRescatado","navigate"],"sources":["/home/zornotza/Documents/laravel-proiektuak/Angular/src/app/Components/admin/form-rescatados/form-rescatados.component.ts"],"sourcesContent":["export class FormRescatadosComponent implements OnInit {\n  nombre = '';\n  apellido = '';\n  edad = '';\n  sexo = '';\n  procedencia = '';\n  valoracion_medica = '';\n  medico_id = '';\n  rescate_id = '';\n  index: number | null = null; // Índice del rescatado a editar\n  id: number | null = null; // Agregar la propiedad id\n\n  rescatados: Rescatado[] = []; // Lista local de rescatados\n\n  constructor(\n    private servicesService: ServicesService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    // Cargar rescatados desde el servicio\n    this.servicesService.cargarRescatados();\n\n    // Suscribirse al observable para actualizar la lista local\n    this.servicesService.rescatados$.subscribe((data) => {\n      this.rescatados = data;\n\n      // Comprobar si tenemos un parámetro de id para la edición\n      this.route.params.subscribe((params) => {\n        const id = +params['id'];  // Convertir el id a un número\n        if (id) {\n          this.id = id;  // Asignar el id recibido de la URL\n          this.index = this.rescatados.findIndex(rescatado => rescatado.id === id);\n          if (this.index !== -1) {\n            const rescatado = this.rescatados[this.index];\n            this.nombre = rescatado.nombre;\n            this.apellido = rescatado.apellido;\n            this.edad = rescatado.edad;\n            this.sexo = rescatado.sexo;\n            this.procedencia = rescatado.procedencia;\n            this.valoracion_medica = rescatado.valoracion_medica;\n            this.medico_id = rescatado.medico_id;\n            this.rescate_id = rescatado.rescate_id;\n          }\n        }\n      });\n    });\n  }\n\n  guardarRescatado() {\n    const rescatado: Rescatado = {\n      nombre: this.nombre,\n      apellido: this.apellido,\n      edad: this.edad,\n      sexo: this.sexo,\n      procedencia: this.procedencia,\n      valoracion_medica: this.valoracion_medica,\n      medico_id: this.medico_id,\n      rescate_id: this.rescate_id,\n    };\n\n    if (this.index === null) {\n      this.servicesService.agregarRescatado(rescatado);\n    } else {\n      this.servicesService.actualizarRescatado(this.index, rescatado);\n    }\n\n    // Navegar de vuelta a la tabla\n    this.router.navigate(['/Admin']);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}